import{u as J}from"./getMachines-42d8bca2.js";import{i as K,r,j as L,c as s,o as u,d as b,w as l,e as o,f as h,h as k,k as C,n as E}from"./index-e5d93ad7.js";const Q={class:"col-12 q-pa-sm"},R={class:"col-12 q-pa-sm"},W={class:"col-12 q-pa-sm"},X={class:"col-12 q-pa-sm"},Y={key:0,class:"text-green"},Z={key:1,class:"text-red"},ee={key:0,class:"text-green"},ae={key:1,class:"text-red"},ne={__name:"Machine",setup(le){const d=K("$swal"),n=J(),_=r([]),$=[{name:"nombre",label:"Nombre",align:"center",field:"nombre"},{name:"serial",label:"Serial",align:"center",field:"serial",sortable:!0},{name:"af",label:"AF",align:"center",field:"af",sortable:!0},{name:"estado",label:"Estado",align:"center",field:"estado",sortable:!0},{name:"estadoMaquina",label:"Estado la maquina",align:"center",field:"estadoMaquina",sortable:!0},{name:"opciones",label:"Opciones",align:"center",field:"opciones"}],y=r(""),i=r(!1);L(async()=>{await n.getData(),_.value=n.machines.value});const V=r(""),m=r(""),v=r(""),f=r(""),c=r({label:"En buen estado",value:1}),M=r(0),D=[{label:"En buen estado",value:1},{label:"En mal estado",value:0}],U=async()=>{const t=await n.crearMachinePost(m.value,v.value,f.value,c.value);t.msg?(i.value=!1,d.fire({icon:"success",title:t.msg,showConfirmButton:!1,timer:2500}),q(),await n.getData(),_.value=n.machines.value):(i.value=!1,d.fire({position:"top-end",icon:"error",title:t.response.data.errores.errors[0].msg,showConfirmButton:!1,timer:1500}),setTimeout(()=>{i.value=!0},1500))},A=t=>{V.value=t._id,m.value=t.nombre,v.value=t.serial,f.value=t.af,t.estadoMaquina===1?c.value={label:"En buen estado",value:1}:c.value={label:"En mal estado",value:0},M.value=1,i.value=!0},N=async()=>{const t=await n.editarMachinePut(V.value,m.value,v.value,f.value,c.value);t.msg?(i.value=!1,d.fire({icon:"success",title:t.msg,showConfirmButton:!1,timer:2500}),q(),await n.getData(),_.value=n.machines.value):(i.value=!1,d.fire({position:"top-end",icon:"error",title:t.response.data.errores.errors[0].msg,showConfirmButton:!1,timer:1500}),setTimeout(()=>{i.value=!0},1500))},P=async t=>{const a=await n.activarMachine(t);a.msg?(d.fire({icon:"success",title:a.msg,showConfirmButton:!1,timer:1500}),await n.getData(),_.value=n.machines.value,q()):d.fire({position:"top-end",icon:"error",title:"Inicia sesión nuevamente",showConfirmButton:!1,timer:1500})},z=async t=>{const a=await n.inactivarMachine(t);a.msg?(d.fire({icon:"success",title:a.msg,showConfirmButton:!1,timer:1500}),await n.getData(),_.value=n.machines.value,q()):d.fire({position:"top-end",icon:"error",title:"Inicia sesión nuevamente",showConfirmButton:!1,timer:1500})},q=()=>{m.value="",v.value="",f.value="",c.value={label:"En buen estado",value:1},M.value=0,V.value="",i.value=!1};return(t,a)=>{const g=s("q-input"),I=s("q-select"),S=s("q-card-section"),p=s("q-btn"),T=s("q-card-actions"),j=s("q-card"),F=s("q-dialog"),w=s("q-tooltip"),G=s("q-icon"),B=s("q-td"),O=s("q-table"),H=s("q-page");return u(),b(H,{class:"q-pa-xl text-center"},{default:l(()=>[o(F,{modelValue:i.value,"onUpdate:modelValue":a[7]||(a[7]=e=>i.value=e),persistent:"","transition-show":"rotate","transition-hide":"rotate"},{default:l(()=>[o(j,{style:{width:"700px","max-width":"80vw"}},{default:l(()=>[o(S,{class:"row"},{default:l(()=>[h("div",Q,[o(g,{rounded:"",outlined:"",modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),label:"Nombre*","lazy-rules":"",rules:[e=>e&&e.length>0||"Porfavor ingresa el nombre del equipo"]},null,8,["modelValue","rules"])]),h("div",R,[o(g,{rounded:"",outlined:"",modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=e=>v.value=e),label:"Serial*","lazy-rules":"",rules:[e=>e&&e.length>0||"Porfavor ingresa el serial"]},null,8,["modelValue","rules"])]),h("div",W,[o(g,{rounded:"",outlined:"",modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=e=>f.value=e),label:"AF*","lazy-rules":"",rules:[e=>e&&e.length>0||"Porfavor ingresa el af del equipo"]},null,8,["modelValue","rules"])]),h("div",X,[o(I,{rounded:"",outlined:"",modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=e=>c.value=e),options:D,label:"Estado del equipo"},null,8,["modelValue"])])]),_:1}),o(T,{align:"right"},{default:l(()=>[o(p,{rounded:"",outline:"",label:"Cancerlar",color:"red",onClick:a[4]||(a[4]=e=>q())}),M.value===0?(u(),b(p,{key:0,rounded:"",outline:"",label:"Aceptar",color:"green",onClick:a[5]||(a[5]=e=>U(m.value,v.value,f.value,c.value))})):(u(),b(p,{key:1,rounded:"",outline:"",label:"Editar",color:"green",onClick:a[6]||(a[6]=e=>N())}))]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(p,{rounded:"",color:"green",class:"q-mb-md",icon:"add_circle",label:"Crea un equipo",onClick:a[8]||(a[8]=e=>i.value=!0)},{default:l(()=>[o(w,null,{default:l(()=>[k("Crear Equipo")]),_:1})]),_:1}),o(O,{dense:t.$q.screen.lt.md,flat:"",bordered:"",title:"Equipos",filter:y.value,rows:_.value,columns:$,"row-key":"_id"},{"top-right":l(()=>[o(g,{color:"black",modelValue:y.value,"onUpdate:modelValue":a[9]||(a[9]=e=>y.value=e),placeholder:"Buscar"},{append:l(()=>[o(G,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-estado":l(e=>[o(B,{props:e},{default:l(()=>[e.row.estado===1?(u(),C("span",Y," Activo ")):(u(),C("span",Z," Inactivo "))]),_:2},1032,["props"])]),"body-cell-estadoMaquina":l(e=>[o(B,{props:e},{default:l(()=>[e.row.estadoMaquina===1?(u(),C("span",ee," Buen estado ")):(u(),C("span",ae," Mal estado "))]),_:2},1032,["props"])]),"body-cell-opciones":l(e=>[o(B,{props:e},{default:l(()=>[o(p,{outline:"",rounded:"",color:"primary",icon:"edit",onClick:x=>A(e.row)},{default:l(()=>[o(w,null,{default:l(()=>[k("Editar maquina")]),_:1})]),_:2},1032,["onClick"]),e.row.estado===1?(u(),b(p,{key:0,class:E(e.row.estado==1?"q-mx-sm":""),outline:"",rounded:"",color:"red",icon:"remove_moderator",onClick:x=>z(e.row._id)},{default:l(()=>[o(w,null,{default:l(()=>[k("Inactivar maquina")]),_:1})]),_:2},1032,["class","onClick"])):(u(),b(p,{key:1,class:E(e.row.estado==0?"q-mx-sm":""),outline:"",rounded:"",color:"green",icon:"verified_user",onClick:x=>P(e.row._id)},{default:l(()=>[o(w,null,{default:l(()=>[k("Activar maquina")]),_:1})]),_:2},1032,["class","onClick"]))]),_:2},1032,["props"])]),_:1},8,["dense","filter","rows"])]),_:1})}}};export{ne as default};
