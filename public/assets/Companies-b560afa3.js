import{u as j}from"./getCompanies-c0e986a4.js";import{i as z,r as f,j as P,c as s,o as u,d as w,w as t,e as a,f as T,h as g,k as C,n as k}from"./index-e4cc669c.js";const G={class:"col-12"},M={key:0,class:"text-green"},O={key:1,class:"text-red"},K={__name:"Companies",setup(F){const i=z("$swal"),c=f([]),x=[{name:"nombre",label:"Nombre",align:"left",field:"nombre"},{name:"estado",label:"Estado",align:"left",field:"estado",sortable:!0},{name:"opciones",label:"Opciones",align:"left",field:"opciones"}],_=f(""),n=j();P(async()=>{await n.getData(),c.value=n.companies.value});const l=f(!1),m=f(""),y=async r=>{const e=await n.crearEmpresaPost(r);e.msg?(l.value=!1,i.fire({icon:"success",title:e.msg,showConfirmButton:!1,timer:3500}),p(),await n.getData(),c.value=n.companies.value):(l.value=!1,i.fire({position:"top-end",icon:"error",title:e.response.data.errores.errors[0].msg,showConfirmButton:!1,timer:1500}),setTimeout(()=>{l.value=!0},1500))},B=async r=>{const e=await n.activarEmpresa(r);e.msg?(i.fire({icon:"success",title:e.msg,showConfirmButton:!1,timer:1500}),p(),await n.getData(),c.value=n.companies.value):i.fire({position:"top-end",icon:"error",title:"Inicia sesión nuevamente",showConfirmButton:!1,timer:1500})},V=async r=>{const e=await n.inactivarEmpresa(r);e.msg?(i.fire({icon:"success",title:e.msg,showConfirmButton:!1,timer:1500}),p(),await n.getData(),c.value=n.companies.value):i.fire({position:"top-end",icon:"error",title:"Inicia sesión nuevamente",showConfirmButton:!1,timer:1500})},p=()=>{m.value="",l.value=!1};return(r,e)=>{const q=s("q-input"),h=s("q-card-section"),d=s("q-btn"),E=s("q-card-actions"),$=s("q-card"),N=s("q-dialog"),v=s("q-tooltip"),D=s("q-icon"),b=s("q-td"),I=s("q-table"),A=s("q-page");return u(),w(A,{class:"q-pa-xl text-center"},{default:t(()=>[a(N,{modelValue:l.value,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value=o),persistent:"","transition-show":"rotate","transition-hide":"rotate"},{default:t(()=>[a($,{style:{width:"700px","max-width":"80vw"}},{default:t(()=>[a(h,{class:"row"},{default:t(()=>[T("div",G,[a(q,{rounded:"",outlined:"",modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=o=>m.value=o),label:"Nombre de la empresa*","lazy-rules":"",rules:[o=>o&&o.length>0||"Porfavor ingresa el nombre de la empresa"]},null,8,["modelValue","rules"])])]),_:1}),a(E,{align:"right"},{default:t(()=>[a(d,{rounded:"",outline:"",label:"Cancerlar",color:"red",onClick:e[1]||(e[1]=o=>p())}),a(d,{rounded:"",outline:"",label:"Aceptar",color:"green",onClick:e[2]||(e[2]=o=>y(m.value))})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(d,{rounded:"",color:"green",class:"q-mb-md",icon:"add_circle",label:"Crea una empresa",onClick:e[4]||(e[4]=o=>l.value=!0)},{default:t(()=>[a(v,null,{default:t(()=>[g("Crear empresa")]),_:1})]),_:1}),a(I,{grid:r.$q.screen.xs,flat:"",bordered:"",title:"Empresas",filter:_.value,rows:c.value,columns:x,"row-key":"name"},{"top-right":t(()=>[a(q,{color:"black",modelValue:_.value,"onUpdate:modelValue":e[5]||(e[5]=o=>_.value=o),placeholder:"Buscar"},{append:t(()=>[a(D,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-estado":t(o=>[a(b,{props:o},{default:t(()=>[o.row.estado===1?(u(),C("span",M," Activo ")):(u(),C("span",O," Inactivo "))]),_:2},1032,["props"])]),"body-cell-opciones":t(o=>[a(b,{props:o},{default:t(()=>[o.row.estado===1?(u(),w(d,{key:0,class:k(o.row.estado==1?"q-mx-sm":""),outline:"",rounded:"",color:"red",icon:"remove_moderator",onClick:U=>V(o.row._id)},{default:t(()=>[a(v,null,{default:t(()=>[g("Inactivar empresa")]),_:1})]),_:2},1032,["class","onClick"])):(u(),w(d,{key:1,class:k(o.row.estado==0?"q-mx-sm":""),outline:"",rounded:"",color:"green",icon:"verified_user",onClick:U=>B(o.row._id)},{default:t(()=>[a(v,null,{default:t(()=>[g("Activar empresa")]),_:1})]),_:2},1032,["class","onClick"]))]),_:2},1032,["props"])]),_:1},8,["grid","filter","rows"])]),_:1})}}};export{K as default};
